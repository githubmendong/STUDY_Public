# π’» 9μ›” 08μΌ μ‹¤μµ
>μΈν…”λ¦¬ μ΄μλ΅ μ• μμ—… λ‚μ¤‘μ— μ •λ¦¬μμ •
```java


// localhost:8080/helloweb/cookie
public class CookieServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        request.setCharacterEncoding("utf-8");
        int visitCount  = 0;
        // μΏ μΉ΄ μ½κΈ°
        Cookie[] cookies = request.getCookies();
        if (cookies != null && cookies.length > 0){
            for (Cookie cookie : cookies){
                if("visit-count".equals(cookie.getName())){
                    visitCount = Integer.parseInt(cookie.getValue());
                }
            }
        }

        visitCount++;

        //μΏ ν‚¤μ“°κΈ° κµ½κΈ°
        Cookie cookie = new Cookie("visit-count", String.valueOf(visitCount));
        cookie.setPath(request.getContextPath());
        cookie.setMaxAge(24 * 60 * 60); //day
        response.addCookie(cookie);

        // ν™”λ©΄ μ¶λ ¥
        response.setContentType("text/html; charset=utf-8");
        PrintWriter pw = response.getWriter();
        pw.print("<h1>λ°©λ¬Ένμ"+visitCount + "</h1>");
    }

}
```
# μΏ ν‚¤ μ²λ¦¬λ¥Ό μ„ν• Servlet

μ΄ μ„λΈ”λ¦Ώμ€ μ›Ή νμ΄μ§€ λ°©λ¬Έ νμλ¥Ό μ¶”μ ν•κ³  μΏ ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ μ •λ³΄λ¥Ό μ μ§€ν•λ” μμ  μ½”λ“μ…λ‹λ‹¤.

## μ½”λ“ μ„¤λ…

1. `doGet` λ©”μ„λ“μ—μ„ GET μ”μ²­μ„ μ²λ¦¬ν•©λ‹λ‹¤.
    - `request.setCharacterEncoding("utf-8")`μ„ νΈμ¶ν•μ—¬ μ”μ²­μ λ¬Έμ μΈμ½”λ”©μ„ UTF-8λ΅ μ„¤μ •ν•©λ‹λ‹¤.

2. `visitCount` λ³€μλ¥Ό μ„ μ–Έν•μ—¬ λ°©λ¬Έ νμλ¥Ό μ¶”μ ν•©λ‹λ‹¤.

3. ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° μ „λ‹¬λ°›μ€ μΏ ν‚¤λ¥Ό μ½μ–΄μµλ‹λ‹¤.
    - `request.getCookies()`λ¥Ό μ‚¬μ©ν•μ—¬ μΏ ν‚¤ λ°°μ—΄μ„ κ°€μ Έμµλ‹λ‹¤.

4. μΏ ν‚¤ λ°°μ—΄μ„ λ°λ³µν•μ—¬ "visit-count" μ΄λ¦„μ μΏ ν‚¤λ¥Ό μ°Ύμ•„ λ°©λ¬Έ νμλ¥Ό κ°€μ Έμµλ‹λ‹¤.
    - μΏ ν‚¤μ μ΄λ¦„μ΄ "visit-count"μΌ λ• ν•΄λ‹Ή κ°’μ„ `visitCount` λ³€μμ— μ €μ¥ν•©λ‹λ‹¤.

5. λ°©λ¬Έ νμλ¥Ό 1 μ¦κ°€μ‹ν‚µλ‹λ‹¤.

6. λ°©λ¬Έ νμλ¥Ό μΏ ν‚¤μ— μ”λ‹λ‹¤.
    - `Cookie` κ°μ²΄λ¥Ό μƒμ„±ν•κ³  "visit-count" μ΄λ¦„κ³Ό λ°©λ¬Έ νμλ¥Ό λ¬Έμμ—΄λ΅ μ„¤μ •ν•©λ‹λ‹¤.
    - `cookie.setPath(request.getContextPath())`λ¥Ό μ‚¬μ©ν•μ—¬ μΏ ν‚¤μ κ²½λ΅λ¥Ό ν„μ¬ μ»¨ν…μ¤νΈ ν¨μ¤λ΅ μ„¤μ •ν•©λ‹λ‹¤.
    - `cookie.setMaxAge(24 * 60 * 60)`μ„ νΈμ¶ν•μ—¬ μΏ ν‚¤μ μ ν¨ μ‹κ°„μ„ ν•λ£¨λ΅ μ„¤μ •ν•©λ‹λ‹¤.
    - `response.addCookie(cookie)`λ¥Ό νΈμ¶ν•μ—¬ μΏ ν‚¤λ¥Ό μ‘λ‹µμ— μ¶”κ°€ν•©λ‹λ‹¤.

7. ν™”λ©΄ μ¶λ ¥μ„ μ„ν•΄ μ‘λ‹µμ μ»¨ν…νΈ νƒ€μ…μ„ HTMLλ΅ μ„¤μ •ν•©λ‹λ‹¤.
    - `response.setContentType("text/html; charset=utf-8")`μ„ μ‚¬μ©ν•μ—¬ λ¬Έμ μΈμ½”λ”©κ³Ό ν•¨κ» HTML μ»¨ν…νΈ νƒ€μ…μ„ μ„¤μ •ν•©λ‹λ‹¤.

8. `PrintWriter` κ°μ²΄λ¥Ό μ‚¬μ©ν•μ—¬ ν™”λ©΄μ— λ°©λ¬Έ νμλ¥Ό μ¶λ ¥ν•©λ‹λ‹¤.
    - `<h1>λ°©λ¬Ένμ`μ™€ `visitCount` κ°’μ„ μ¶λ ¥ν•μ—¬ ν™”λ©΄μ— ν‘μ‹ν•©λ‹λ‹¤.

## λ™μ‘ μ›λ¦¬
- ν΄λΌμ΄μ–ΈνΈκ°€ μ„λΈ”λ¦Ώμ— μ²μ μ ‘κ·Όν•λ©΄ μΏ ν‚¤κ°€ μ—†μΌλ―€λ΅ λ°©λ¬Έ νμλ” 0μ—μ„ μ‹μ‘ν•©λ‹λ‹¤.
- μ„λΈ”λ¦Ώμ΄ ν΄λΌμ΄μ–ΈνΈμ—κ² μ‘λ‹µν•  λ•, μΏ ν‚¤λ¥Ό μƒμ„±ν•μ—¬ ν΄λΌμ΄μ–ΈνΈλ΅ λ³΄λ‚΄κ³ , ν΄λΌμ΄μ–ΈνΈλ” ν•΄λ‹Ή μΏ ν‚¤λ¥Ό μ €μ¥ν•©λ‹λ‹¤.
- λ‹¤μ μ”μ²­ μ‹, ν΄λΌμ΄μ–ΈνΈλ” μ €μ¥ν• μΏ ν‚¤λ¥Ό μ„λ²„λ΅ λ³΄λ‚΄μ–΄ λ°©λ¬Έ νμλ¥Ό μ μ§€ν•©λ‹λ‹¤.
- μ΄λ ‡κ² μΏ ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ μ •λ³΄λ¥Ό μ μ§€ν•κ³  μ¶”μ ν•  μ μμµλ‹λ‹¤.
